# Pixie - AI 기반 맞춤형 투자 자문 시스템 설치 가이드

## 목차
1. [시스템 요구사항](#시스템-요구사항)
2. [빠른 시작 가이드](#빠른-시작-가이드)
3. [상세 설치 과정](#상세-설치-과정)
4. [환경 설정](#환경-설정)
5. [실행 방법](#실행-방법)
6. [문제 해결](#문제-해결)
7. [주요 기능 소개](#주요-기능-소개)

## 시스템 요구사항

### 필수 요구사항
- **Python**: 3.8 이상 (3.9 ~ 3.11 권장)
- **운영체제**: Windows 10/11, macOS, Linux
- **RAM**: 최소 4GB (8GB 권장)
- **저장공간**: 최소 1GB 여유 공간
- **인터넷**: API 통신을 위한 안정적인 연결

### 필수 API 키
- **OpenAI API Key**: ChatGPT 기반 AI 투자 조언을 위해 필요
  - 발급: https://platform.openai.com/api-keys
- **Flask Secret Key**: 웹 세션 보안을 위해 필요 (32자 이상)

### 선택 API 키
- **Supabase**: 클라우드 데이터베이스 사용 시 (선택사항)
- **Clova Studio**: OpenAI 대체 LLM (선택사항)

## 빠른 시작 가이드

### Windows 사용자 (5분 설치)

1. **프로젝트 다운로드**
   ```bash
   git clone [GitHub URL]
   cd pixie
   ```

2. **환경 설정 파일 생성**
   ```bash
   copy .env.example .env
   notepad .env
   ```
   필수 항목 입력:
   ```
   OPENAI_API_KEY=sk-your-openai-api-key
   FLASK_SECRET_KEY=your-32-character-secret-key-here!!!
   ```

3. **자동 설치 및 실행**
   ```bash
   setup_and_run.bat
   ```

4. **웹 브라우저에서 접속**
   ```
   http://localhost:5000
   ```

### macOS/Linux 사용자

1. **프로젝트 다운로드**
   ```bash
   git clone [GitHub URL]
   cd pixie
   ```

2. **가상환경 생성 및 활성화**
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

3. **패키지 설치**
   ```bash
   pip install -r requirements.txt
   ```

4. **환경 설정**
   ```bash
   cp .env.example .env
   nano .env  # 또는 vim .env
   ```

5. **실행**
   ```bash
   cd web
   python app.py
   ```

## 상세 설치 과정

### 1단계: Python 설치 확인
```bash
python --version
# Python 3.8.0 이상이어야 함
```

Python이 설치되어 있지 않다면:
- Windows: https://www.python.org/downloads/
- macOS: `brew install python3`
- Linux: `sudo apt-get install python3 python3-pip`

### 2단계: 프로젝트 다운로드
```bash
# Git을 사용하는 경우
git clone [GitHub URL]
cd pixie

# 또는 ZIP 파일 다운로드 후 압축 해제
```

### 3단계: 가상환경 설정 (권장)
```bash
# Windows
python -m venv venv
venv\Scripts\activate

# macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

### 4단계: 의존성 패키지 설치
```bash
pip install -r requirements.txt
```

주요 패키지:
- Flask (웹 프레임워크)
- pandas (데이터 처리)
- scikit-learn (머신러닝)
- openai (AI API)
- yfinance (주가 데이터)
- statsmodels (시계열 분석)

### 5단계: 환경 변수 설정
1. `.env.example` 파일을 `.env`로 복사
2. 텍스트 에디터로 `.env` 파일 열기
3. 필수 API 키 입력:

```env
# 필수 설정
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
FLASK_SECRET_KEY=32자이상의랜덤문자열입력하세요!!!

# 선택 설정 (사용하지 않으면 주석 처리)
# SUPABASE_URL=https://xxxxx.supabase.co
# SUPABASE_KEY=eyJxxxxxxxxxx
# CLOVA_API_KEY=xxxxxxxxxxxxx
```

### 6단계: 데이터베이스 초기화
데이터베이스는 첫 실행 시 자동으로 생성됩니다.
수동으로 초기화하려면:
```bash
python web/app.py --init-db
```

## 환경 설정

### API 키 발급 가이드

#### OpenAI API Key
1. https://platform.openai.com 접속
2. 로그인 또는 회원가입
3. API Keys 메뉴 클릭
4. "Create new secret key" 클릭
5. 생성된 키를 `.env` 파일에 복사

#### Flask Secret Key 생성
Python으로 안전한 키 생성:
```python
import secrets
print(secrets.token_hex(32))
```

### 포트 설정 (선택사항)
기본 포트(5000)를 변경하려면 `web/app.py` 파일 수정:
```python
if __name__ == '__main__':
    app.run(debug=True, port=8080)  # 원하는 포트로 변경
```

## 실행 방법

### 방법 1: 배치 파일 사용 (Windows)
```bash
# 빠른 실행
run_pixie_web.bat

# 전체 설정 포함 실행
setup_and_run.bat
```

### 방법 2: 명령줄 실행
```bash
# 프로젝트 루트에서
python web/app.py

# 또는 web 디렉토리에서
cd web
python app.py
```

### 방법 3: 개발 모드 실행
```bash
# 디버그 모드 활성화
export FLASK_ENV=development  # Linux/macOS
set FLASK_ENV=development     # Windows
python web/app.py
```

## 문제 해결

### 자주 발생하는 문제

#### 1. ModuleNotFoundError
```
오류: ModuleNotFoundError: No module named 'openai'
해결: pip install -r requirements.txt
```

#### 2. ImportError: src 모듈을 찾을 수 없음
```
오류: ImportError: cannot import name 'InvestmentAdvisor'
해결: 프로젝트 루트 디렉토리에서 실행하거나 PYTHONPATH 설정
```

#### 3. OpenAI API 오류
```
오류: openai.error.AuthenticationError
해결: .env 파일의 OPENAI_API_KEY 확인
```

#### 4. 포트 사용 중 오류
```
오류: Address already in use
해결: 다른 포트 사용 또는 기존 프로세스 종료
```

#### 5. 데이터베이스 오류
```
오류: sqlite3.OperationalError
해결: web/investment_data.db 파일 권한 확인
```

### 로그 확인
문제 발생 시 로그 파일 확인:
- `minerva_YYYYMMDD.log`: 시스템 전체 로그
- `web/api_service.log`: API 호출 로그
- `data_update.log`: 데이터 업데이트 로그

## 주요 기능 소개

### 1. 투자 설문 (10문항)
- 투자 성향 분석
- 맞춤형 포트폴리오 추천
- URL: `/survey`

### 2. AI 챗봇
- 실시간 투자 상담
- 다중 AI 에이전트 시스템
- URL: `/chatbot`

### 3. 주가 예측
- ARIMA-X 모델 기반
- 한국/미국 주식 지원
- URL: `/predictions`

### 4. 뉴스/이슈
- 실시간 금융 뉴스
- 맞춤형 키워드 필터링
- URL: `/news`

### 5. 투자 학습
- 투자 기초 교육
- 용어 설명
- URL: `/learning`

### 6. MY 투자
- 포트폴리오 관리
- 투자 내역 추적
- URL: `/my-investment`

## 추가 정보

### 데이터 업데이트
```bash
# 전체 데이터 업데이트
python src/main.py --update-data all

# 뉴스만 업데이트
python src/main.py --update-data news
```

### 성능 최적화
- 프로덕션 환경에서는 `FLASK_ENV=production` 설정
- Gunicorn 등의 WSGI 서버 사용 권장
- 정기적인 데이터베이스 최적화

### 보안 주의사항
- `.env` 파일은 절대 Git에 커밋하지 마세요
- Flask Secret Key는 정기적으로 변경
- API 키는 안전하게 관리

## 지원 및 문의

설치 중 문제가 발생하면:
1. [GitHub Issues] 페이지 확인
2. `CLAUDE.md` 파일의 기술 문서 참조
3. 로그 파일 확인 후 오류 메시지 검색

---

**버전**: 1.0.0  
**최종 업데이트**: 2024년 1월  
**라이선스**: MIT License